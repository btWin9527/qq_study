<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
<input type="text" id="inp">
<div id="cont"></div>
<script>
  window.onload = function () {
    let obj = {}, val;
    let inpId = document.getElementById('inp');
    let contId = document.getElementById('cont');
    /*
    * Object.defineProperty
    * @description： 直接在一个对象上定义一个新熟悉，或者修改一个对象的现有属性，并返回此对象
    *
    * */
    Object.defineProperty(obj, 'name', {
      configurable: true, // 可配置(默认true)
      enumerable: true, // 可枚举(默认true)
      get: function () {
        console.log('get触发'); // 3.
        return val;
      },
      set: function (newVal) {
        console.log('set触发'); // 2.
        val = newVal; // 给obj.name设置属性值
        contId.innerHTML = newVal; // 模拟双向绑定
      }
    });
    // 监听input的oninput事件
    inpId.addEventListener('input', function (e) {
      console.log('输入监听触发'); // 1.
      obj.name = e.target.value;
      console.log(obj.name, '打印obj.name属性'); // 4.
    });

  }
</script>
</body>
</html>
